---
import Review from "./Review.astro";
import Title from "../common/Title.astro";
import { feedbacks } from "../../data/feedbacks";

const currentDate = new Date();

const filteredFeedbacks = feedbacks.filter((feedback) => {
  const feedbackDate = new Date(feedback.data);
  return feedbackDate < currentDate;
});
---

<section class='bg-[#363333] text-white font-bold md:py-10'>
  <div class='mx-auto max-w-[1400px] p-[16px] md:px-[60px]'>
    <Title title='Client Feedack' />
    <ul
      class='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-4 gap-y-8'
    >
      {
        filteredFeedbacks.map(
          ({ body, author, publisher, ratingValue, bestRating, data }) => {
            return (
              <Review
                body={body}
                author={author}
                publisher={publisher}
                ratingValue={ratingValue}
                bestRating={bestRating}
                data={data}
              />
            );
          }
        )
      }
    </ul>
  </div>
</section>
